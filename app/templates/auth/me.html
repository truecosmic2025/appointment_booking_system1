{% extends "base.html" %}
{% block title %}My Account | TrueCosmic Calendar{% endblock %}
{% block content %}
<section class="py-16">
  <div class="mx-auto max-w-2xl px-4">
    <h1 class="text-3xl font-bold text-slate-900">My account</h1>
    <div class="mt-6 rounded-lg border border-slate-200 bg-white p-6">
      <dl class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm">
        <div>
          <dt class="text-slate-500">Name</dt>
          <dd class="font-medium text-slate-900">{{ current_user.name }}</dd>
        </div>
        <div>
          <dt class="text-slate-500">Email</dt>
          <dd class="font-medium text-slate-900">{{ current_user.email }}</dd>
        </div>
        <div>
          <dt class="text-slate-500">Role</dt>
          <dd class="font-medium text-slate-900">{{ current_user.role }}</dd>
        </div>
        {% if current_user.role in ['host','owner','admin'] %}
        <div>
          <dt class="text-slate-500">Google Calendar</dt>
          <dd class="font-medium">
            {% if profile and profile.google_credentials %}
              <span class="inline-flex items-center rounded-md bg-emerald-50 px-2 py-0.5 text-emerald-700 ring-1 ring-inset ring-emerald-200 text-xs">Connected</span>
            {% else %}
              <span class="inline-flex items-center rounded-md bg-amber-50 px-2 py-0.5 text-amber-700 ring-1 ring-inset ring-amber-200 text-xs">Not connected</span>
            {% endif %}
          </dd>
        </div>
        {% endif %}
      </dl>
      <div class="mt-6">
        <a href="{{ url_for('auth.logout') }}" class="inline-flex rounded-md bg-slate-900 px-4 py-2 text-white text-sm font-semibold">Sign out</a>
        {% if current_user.role in ['host','owner','admin'] %}
          {% if not profile or not profile.google_credentials %}
            <a href="{{ url_for('google.connect') }}" class="ml-2 inline-flex rounded-md border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50">Connect Google Calendar</a>
          {% else %}
            <form method="post" action="{{ url_for('google.disconnect') }}" class="ml-2 inline">
              <button class="inline-flex rounded-md border border-red-300 bg-red-50 px-4 py-2 text-sm font-semibold text-red-700 hover:bg-red-100" onclick="return confirm('Disconnect Google Calendar? Bookings will no longer sync.');">Disconnect Google Calendar</button>
            </form>
            <a href="{{ url_for('coach.settings') }}" class="ml-2 inline-flex rounded-md border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50">Edit availability</a>
          {% endif %}
        {% endif %}
      </div>
    </div>
  </div>
</section>
{% endblock %}
